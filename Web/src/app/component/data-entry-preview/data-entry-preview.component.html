<p-dialog
  *ngIf="dataEntry() != null"
  header="Data Entry Preview"
  closable="true"
  closeOnEscape="true"
  modal="true"
  styleClass="min-w-128"
  (close)="hide()"
  (onHide)="hide()"
  [(visible)]="isShown"
>
  <div class="flex flex-wrap">
    <div class="w-1/2">
      <p class="font-bold">Created At</p>
      <p>{{ dataEntry()!.createdAt | date:'short' }}</p>
    </div>
    <div class="w-1/2">
      <p class="font-bold">Created By</p>
      <p>{{ toUserIdentityFullName(dataEntry()!.createdBy) }}</p>
    </div>
    <div class="w-1/2 mt-4">
      <p class="font-bold">Modified At</p>
      <p>{{ dataEntry()!.modifiedAt | date:'short' }}</p>
    </div>
    <div class="w-1/2 mt-4">
      <p class="font-bold">Modified By</p>
      <p>{{ toUserIdentityFullName(dataEntry()!.modifiedBy) }}</p>
    </div>
  </div>

  <p class="font-bold mt-4">Values</p>

  <p-table
    [columns]="dataEntry()!.fields || []"
    [value]="[dataEntry()]"
  >
    <ng-template
      #header
      let-fields
    >
      <tr>
        @for (field of fields; track field.id) {
          <th>{{ field.name }}</th>
        }
      </tr>
    </ng-template>

    <ng-template #body>
      <tr>
        @for (field of dataEntry()!.fields; track field.id) {
          <td>{{ field.value }}</td>
        }
      </tr>
    </ng-template>
  </p-table>

  <div class="flex justify-end mt-4">
    <p-button
      label="Close"
      class="p-button-secondary"
      (onClick)="hide()"
    ></p-button>
  </div>
</p-dialog>
