<user-preview/>

<user-management/>

<confirmation
  [key]='"instance-delete-confirmation"'
  [header]='"Are you sure about deleting this user?"'
/>

<div class="mb-2">
  <messages-showcase [messages]="messages()"/>
</div>

<p-button
  label="Create"
  icon="pi pi-plus"
  type="button"
  (onClick)="showManagement()"
/>

<div class="card mt-4">
  <p-table
    styleClass="w-fit shadow-lg mt-2 dark:bg-primary-950! bg-primary-50!"
        paginatorStyleClass="dark:bg-primary-950! bg-primary-50!"
    [value]="users()"
    [paginator]="true"
    [rows]="10"
    [rowsPerPageOptions]="[10, 20, 50]"
  >
    <ng-template #header>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Birthdate</th>
        <th>Country</th>
        <th>Actions</th>
      </tr>
    </ng-template>

    <ng-template
      #body
      let-user
    >
      <tr>
        <td>{{ user.firstName + ' ' + user.lastName }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.birthDate | date:'mediumDate' }}</td>
        <td>{{ getCountryName(user) }}</td>
        <td class="flex flex-nowrap items-center">
          <p-button
            icon="pi pi-eye"
            type="button"
            variant="text"
            (onClick)="showPreview(user)"
          />
          <p-button
            icon="pi pi-pencil"
            type="button"
            variant="text"
            (onClick)="showManagement(user)"
          />
          <p-button
            icon="pi pi-trash"
            type="button"
            variant="text"
            (onClick)="delete(user)"
          />
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
