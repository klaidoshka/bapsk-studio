<h2 class="text-2xl font-bold mb-4">Login</h2>

<p-dialog
  header="Reset Password"
  [(visible)]="showResetDialog"
  [modal]="true"
  [closeOnEscape]="true"
  styleClass="min-w-128"
>
  <auth-reset-password/>
</p-dialog>

<form
  [formGroup]="loginForm"
  (ngSubmit)="onSubmit()"
  class="space-y-4"
>

  <!-- Display messages if any -->
  <messages-showcase [messages]="messages()"/>

  <!-- Email Input -->
  <div class="form-field">
    <label
      for="email"
      class="block text-sm font-medium"
    >Email</label>

    <input
      type="email"
      id="email"
      formControlName="email"
      pInputText
      class="mt-1 block w-full p-2 bg-surface-50"
    />

    @if (getErrorMessage('email'); as emailInvalid) {
      <div class="text-xs text-red-500 mt-1">
        {{ emailInvalid }}
      </div>
    }
  </div>

  <!-- Password Input -->
  <div class="form-field">
    <label
      for="password"
      class="block text-sm font-medium"
    >Password</label>

    <p-password
      id="password"
      formControlName="password"
      class="mt-1 block w-full!"
      inputStyleClass="w-full"
      styleClass="w-full"
      toggleMask="true"
      feedback="false"
    />

    @if (getErrorMessage('password'); as passwordInvalid) {
      <div class="text-xs text-red-500 mt-1">
        {{ passwordInvalid }}
      </div>
    }
  </div>

  <!-- Submit Button -->
  <div class="flex justify-center">
    <p-button
      type="submit"
      label="Login"
      icon="pi pi-check"
      iconPos="right"
      [loading]="isSubmitting()"
      [disabled]="loginForm.invalid"
    />
  </div>
</form>

<p class="mt-4 text-sm text-center">Don't have an account yet?</p>

<div class="flex flex-col justify-center items-center">
  <p class="text-center">
    <a
      routerLink="/auth/register"
      class="dark:text-indigo-400 text-indigo-600 hover:underline"
    >Register here</a>
  </p>

  <p (click)="showResetDialog.set(true)" class="hover:cursor-pointer dark:text-indigo-400 text-indigo-600 hover:underline">
    Reset password
  </p>
</div>
