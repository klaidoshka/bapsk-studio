<form [formGroup]="form" class="flex flex-col gap-4">
  <div class="flex flex-wrap gap-4">
    <!-- Report Type -->
    <div>
      <p-floatlabel variant="on" class="w-60">
        <p-select [options]="reportTypes" optionLabel="label" optionValue="id" appendTo="body" inputId="reportType"
                  [(ngModel)]="selectedType" [ngModelOptions]="{standalone: true}" dropdownIcon="pi pi-book"
                  styleClass="w-full"/>
        <label for="reportType">Report Type</label>
      </p-floatlabel>
    </div>

    @switch (selectedType()) {
      @case (1) {
        <!-- Template -->
        <div formGroupName="dataEntry">
          <p-floatlabel variant="on" class="w-60">
            <p-select [options]="reportTemplates.value()" optionLabel="label" optionValue="id" appendTo="body"
                      formControlName="templateId" class="w-full"/>
            <label for="templateId">Report Template</label>
          </p-floatlabel>
        </div>
      }
      @default {
        <ng-container formGroupName="sale">
          <!-- Customer -->
          <div>
            <p-floatlabel variant="on" class="w-60">
              <p-select [options]="customers.value()" optionLabel="label" optionValue="id" appendTo="body"
                        styleClass="w-full" formControlName="customerId" dropdownIcon="pi pi-user"/>
              <label for="customerId">Customer</label>
            </p-floatlabel>
          </div>

          <!-- Salesman -->
          <div>
            <p-floatlabel variant="on" class="w-60">
              <p-select [options]="salesmen.value()" optionLabel="label" optionValue="id" appendTo="body"
                        styleClass="w-full" formControlName="salesmanId" dropdownIcon="pi pi-shopping-cart"/>
              <label for="salesmanId">Salesman</label>
            </p-floatlabel>
          </div>
        </ng-container>
      }
    }

    <!-- Date (From) -->
    <div>
      <p-floatlabel variant="on" class="w-60">
        <p-date-picker inputId="from" formControlName="from" [showIcon]="true" variant="filled" iconDisplay="input"
                       appendTo="body" styleClass="w-full"/>
        <label for="to">From (Inclusive)</label>
        <form-input-error [control]="form.controls.from"/>
      </p-floatlabel>
    </div>

    <!-- Date (To) -->
    <div>
      <p-floatlabel variant="on" class="w-60">
        <p-date-picker inputId="to" formControlName="to" [showIcon]="true" variant="filled" iconDisplay="input"
                       appendTo="body" styleClass="w-full"/>
        <label for="to">Until (Inclusive)</label>
        <form-input-error [control]="form.controls.to"/>
      </p-floatlabel>
    </div>
  </div>
  <form-input-error [control]="form" [customErrorMessages]="customErrorMessages"/>
  <messages-showcase [messages]="messages()"/>
  <p-button title="Submit" size="small" label="Generate" type="submit" (onClick)="generate()"
            [disabled]="form.invalid || !form.dirty"/>
</form>
