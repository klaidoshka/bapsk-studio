<p-table paginatorDropdownAppendTo="body" [value]="dataEntriesModified()" [columns]="dataType().fields" [paginator]="true"
         [rows]="10" [rowsPerPageOptions]="[10, 20, 50]" scrollable="true" scrollHeight="flex" sortMode="multiple"
         (sortFunction)="onSort($event)" [customSort]="true">
  <ng-template #header let-columns>
    <tr>
      @for (field of columns; track field.id) {
        <th pSortableColumn="{{field.id}}">{{ field.name }} <p-sortIcon field="{{field.id}}" /></th>
      }
      <th pSortableColumn="createdAt">Created <p-sortIcon field="createdAt" /></th>
      <th pSortableColumn="modifiedAt">Modified <p-sortIcon field="modifiedAt" /></th>
      <th pSortableColumn="modifiedByFullName">Last Modified By <p-sortIcon field="modifiedByFullName" /></th>
      <th *ngIf="containsActions()"></th>
    </tr>
  </ng-template>

  <ng-template #body let-dataEntry>
    <tr>
      @for (field of dataEntry.fields; track field.id) {
        <td>
          <data-type-entry-field-display [dataTypeFieldId]="field.dataTypeFieldId" [dataType]="dataType()"
                                         [value]="field.value" [instanceId]="instanceId()"/>
        </td>
      }
      <td>{{ dataEntry.createdAt | date:'short' }}</td>
      <td>{{ dataEntry.modifiedAt | date:'short' }}</td>
      <td>{{ dataEntry.modifiedByFullName }}</td>
      <td *ngIf="containsActions()">
        <div class="flex items-center">
          <p-button *ngIf="preview()" title="Preview" icon="pi pi-eye" type="button" variant="text"
                    (onClick)="preview()?.(dataEntry)"/>
          <p-button *ngIf="manage()" title="Edit" icon="pi pi-pencil" type="button" variant="text"
                    (onClick)="manage()?.(dataEntry)"/>
          <p-button *ngIf="delete()" title="Delete" icon="pi pi-trash" type="button" variant="text"
                    (onClick)="delete()?.(dataEntry)"/>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>
