<div class="h-full w-full flex flex-col p-4">
  <div class="container">
    <confirmation key="report-template-delete-confirmation" header="Are you sure about deleting this report template?"/>

    <h1 class="text-2xl font-bold mb-4">Report Templates</h1>

    <messages-showcase [messages]="messages()"/>

    <div class="card mt-4">
      @if (!instanceId()) {
        <messages-showcase [messages]="{warning: ['Please select an instance to manage report templates.']}"/>
      } @else {
        <p-button label="Create" icon="pi pi-plus" type="button" (onClick)="manage()"/>
      }

      <p-table styleClass="w-fit shadow-lg mt-2 dark:bg-primary-950! bg-primary-50!"
               paginatorStyleClass="dark:bg-primary-950! bg-primary-50!" [value]="templates.value() || []"
               [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10, 20, 50]">
        <ng-template #header>
          <tr>
            <th>Name</th>
            <th>Included Data Types</th>
            <th>Fields</th>
            <th></th>
          </tr>
        </ng-template>

        <ng-template #body let-template>
          <tr>
            <td>{{ template.name }}</td>
            <td>{{ getDataTypesCount(template) }} data type(s)</td>
            <td>{{ template.fields.length }} field(s)</td>
            <td class="flex flex-nowrap items-center">
              <p-button icon="pi pi-eye" type="button" variant="text" (onClick)="preview(template)"/>
              <p-button icon="pi pi-pencil" type="button" variant="text" (onClick)="manage(template)"/>
              <p-button icon="pi pi-trash" type="button" variant="text" (onClick)="delete(template)"/>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
