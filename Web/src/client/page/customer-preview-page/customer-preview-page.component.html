<div class="h-full w-full relative container mx-auto flex flex-col mb-8">
  <customer-page-header-section [canGoBack]="true"/>
  @if (customer.isLoading()) {
    <loading-spinner/>
  } @else if (!customer.value()) {
    <failed-to-load-please-reload/>
  } @else {
    @let customerValue = customer.value()!;
    <card>
      <p card-header>Customer</p>
      <card card-body>
        <p card-header>Details</p>
        <div card-body class="flex flex-col gap-4">
          <div class="flex flex-col gap-2">
            <div class="flex flex-row gap-2">
              <p class="font-semibold">First Name</p>
              <p>{{ customerValue.firstName }}</p>
            </div>

            <div class="flex flex-row gap-2">
              <p class="font-semibold">Last Name</p>
              <p>{{ customerValue.lastName }}</p>
            </div>

            <div class="flex flex-row gap-2">
              <p class="font-semibold">Email</p>
              <p>{{ customerValue.email }}</p>
            </div>

            <div class="flex flex-row gap-2">
              <p class="font-semibold">Birthdate</p>
              <p>{{ customerValue.birthdate | date:'mediumDate' }}</p>
            </div>

            <div class="flex flex-row gap-2">
              <p class="font-semibold">Residence Country</p>
              <p>{{ getIsoCountryLabel(customerValue.residenceCountry) }}</p>
            </div>
          </div>

          <card>
            <p card-header>Identity Document</p>
            <div card-body>
              <p>Issued By: {{ getCountryName(customerValue.identityDocument!.issuedBy) }}</p>
              <p>Type: {{ getIdentityDocumentTypeLabel(customerValue.identityDocument!.type) }}</p>
              <p>Number: {{ customerValue.identityDocument!.number }}</p>
              <p>Personal Code: {{ customerValue.identityDocument!.value || "Unprovided" }}</p>
            </div>
          </card>
          @if (customerValue.otherDocuments.length > 0) {
            <card>
              <p card-header>Other Documents</p>
              <p card-subHeader>These documents help customs determine whether customer's residence is not within EU
                country.</p>
              <div card-body>
                <p-table [value]="customerValue.otherDocuments" paginatorStyleClass="rounded-t-none! bg-inherit!"
                         paginatorDropdownAppendTo="body" [styleClass]="'rounded-md mb-4 border border-primary-950/20 dark:border-primary-50/20 relative w-full overflow-auto ' +
                      '[&_th]:border-b-primary-950/20! [&_th]:dark:border-primary-50/20! [&_td]:border-b-primary-950/20! [&_td]:dark:border-primary-50/20!'"
                         [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10, 20, 50]">
                  <ng-template #header>
                    <tr>
                      <th>Issued By</th>
                      <th>Type</th>
                      <th>Number</th>
                    </tr>
                  </ng-template>
                  <ng-template #body let-otherDocument>
                    <tr>
                      <td>{{ getCountryName(otherDocument.issuedBy) }}</td>
                      <td>{{ otherDocument.type }}</td>
                      <td>{{ otherDocument.value }}</td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </card>
          }
        </div>
      </card>
    </card>
  }
</div>
