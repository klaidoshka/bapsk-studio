<div class="h-screen w-full flex mt-4 justify-center">
  <div class="container">
    <confirmation
      key="import-configuration-delete-confirmation"
      header="Are you sure about deleting this import configuration?"
    />

    <h1 class="text-2xl font-bold mb-4">Import Configurations</h1>

    <messages-showcase [messages]="messages()"/>

    <div class="card mt-4">
      @if (!instanceId()) {
        <messages-showcase [messages]="{warning: ['Please select an instance to manage import configurations.']}"/>
      } @else {
        <p-button
          label="Create"
          icon="pi pi-plus"
          type="button"
          (onClick)="manage()"
        />
      }

      <p-table
        styleClass="w-fit"
        [value]="configurations.hasValue() ? configurations.value()! : []"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[10, 20, 50]"
      >
        <ng-template #header>
          <tr>
            <th>Name</th>
            <th>Data Type</th>
            <th>Fields</th>
            <th>Actions</th>
          </tr>
        </ng-template>

        <ng-template
          #body
          let-configuration
        >
          <tr>
            <td>{{ configuration.name }}</td>
            <td>{{ configuration.dataType.name }}</td>
            <td>{{ configuration.fields.length }} fields</td>
            <td class="flex flex-nowrap items-center">
              <p-button
                icon="pi pi-eye"
                type="button"
                variant="text"
                (onClick)="preview(configuration)"
              ></p-button>
              <p-button
                icon="pi pi-pencil"
                type="button"
                variant="text"
                (onClick)="manage(configuration)"
              ></p-button>
              <p-button
                icon="pi pi-trash"
                type="button"
                variant="text"
                (onClick)="delete(configuration)"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
